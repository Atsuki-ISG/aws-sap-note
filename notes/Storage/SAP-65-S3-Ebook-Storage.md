---
id: "SAP-65"
title: "Secure E-book Storage on S3"
category: "Storage"
domain: "æ–°ã—ã„ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆ (Design for New Solutions)"
tags:
  - "S3"
  - "KMS"
  - "Encryption"
  - "Durability"
created_at: "2026-02-05"
---

# Secure E-book Storage on S3 (SAP-65)

## 1. çŠ¶æ³ã®èª­ã¿è§£ã (Context & Requirements)

- **æ§‹æˆå›³ã®åˆ†æž**: é›»å­æ›¸ç±ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆåŽŸç¨¿ãƒ»ç”»åƒãƒ»PDFï¼‰ã®ä¿å­˜åŸºç›¤ã€‚
- **å¿…é ˆè¦ä»¶**:
    - **11 nines (99.999999999%) ã®è€ä¹…æ€§**: ã“ã‚Œã‚’æº€ãŸã™ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ S3 (ã¾ãŸã¯ Glacier) ã®ã¿ã€‚EBS ã¯ 99.8% - 99.999%ã€‚
    - **ãƒ•ãƒ«ãƒžãƒãƒ¼ã‚¸ãƒ‰ & è‡ªå‹•æ‹¡å¼µ**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ç®¡ç†ãŒä¸è¦ã§ã‚ã‚‹ã“ã¨ã€‚
    - **æš—å·åŒ–**:
        - è»¢é€ä¸­: å¸¸æ™‚æš—å·åŒ– (HTTPS)ã€‚
        - ä¿å­˜æ™‚: éµã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£éƒ¨é–€æ‰€æœ‰ (Customer Managed Key) ï¼‹ å¹´æ¬¡ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

## 2. å‹è² ã‚’æ±ºã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ (Trigger Words)

- **"99.999999999%ã®è€ä¹…æ€§"**: **S3** ä¸€æŠžã€‚
- **"æš—å·éµã¯ç¤¾å†…ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£éƒ¨é–€ãŒæ‰€æœ‰ã—ã¦å¹´æ¬¡ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"**: KMS ã® **ã‚«ã‚¹ã‚¿ãƒžãƒ¼ç®¡ç†ã‚­ãƒ¼ (CMK)** ãŒå¿…è¦ï¼ˆAWS ç®¡ç†ã‚­ãƒ¼ã¯ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å‘¨æœŸã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ¶å¾¡ã§ããªã„/æ‰€æœ‰æ¨©ãŒAWSï¼‰ã€‚
- **"è»¢é€ãƒ‡ãƒ¼ã‚¿ã‚‚...æš—å·åŒ–"**: ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ã§ `aws:SecureTransport` (HTTPS) ã‚’å¼·åˆ¶ã™ã‚‹ã€‚

## 3. ãªãœãã®ç­”ãˆã‹ (Reasoning)

- **è«–ç†çš„æ ¹æ‹  (C)**:
    - **è€ä¹…æ€§**: S3 ã¯ã‚¤ãƒ¬ãƒ–ãƒ³ãƒŠã‚¤ãƒ³ (11 9s) ã®è€ä¹…æ€§ã‚’æä¾›ã™ã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€åŽŸç¨¿ãƒ‡ãƒ¼ã‚¿ã®æ¶ˆå¤±ãƒªã‚¹ã‚¯ã‚’æ¥µå°åŒ–ã§ãã¾ã™ã€‚
    - **æš—å·åŒ–**: ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ã§ `aws:SecureTransport` ã‚’ `true` (ã¾ãŸã¯ falseãªã‚‰Deny) ã«ã™ã‚‹ã“ã¨ã§ HTTPS ã‚’å¼·åˆ¶ã§ãã¾ã™ã€‚ã¾ãŸã€KMS ã‚«ã‚¹ã‚¿ãƒžãƒ¼ç®¡ç†ã‚­ãƒ¼ (CMK) ã‚’ä½¿ç”¨ã—ãŸã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰æš—å·åŒ– (SSE-KMS) ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæš—å·åŒ–ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã®æ‰€æœ‰æ¨©ã¨ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¦ä»¶ã‚’æº€ãŸã›ã¾ã™ã€‚
    - **ãƒžãƒãƒ¼ã‚¸ãƒ‰**: S3 ã¯å®¹é‡ç„¡åˆ¶é™ã§è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ãƒ•ãƒ«ãƒžãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚
- **é¸æŠžè‚¢ã®åˆ†æž**:
    - **A (EBS)**: è€ä¹…æ€§ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€ã‚¢ãƒ—ãƒªã§ã®æš—å·åŒ–å®Ÿè£…ã¯ã€Œè‡ªç¤¾å®Ÿè£…ã«äººçš„ã‚³ã‚¹ãƒˆã‚’å‰²ã‘ãªã„ã€è¦ä»¶ã«åã™ã‚‹ã»ã‹ã€EC2/EBS ã®ç®¡ç†è² è·ã‚‚é«˜ã„ã§ã™ã€‚
    - **B (Storage Gateway)**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ S3 ã§ã™ãŒã€è¨­å•ã«ã¯ã€Œãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã® EBS ãƒœãƒªãƒ¥ãƒ¼ãƒ ã€ã¨ã‚ã‚Šã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒœãƒªãƒ¥ãƒ¼ãƒ ç­‰ã®æ§‹æˆã‚’æŒ‡ã—ã¦ã„ã‚‹ã¨ã—ã¦ã‚‚è€ä¹…æ€§è¦ä»¶ã‚„ãƒžãƒãƒ¼ã‚¸ãƒ‰è¦ä»¶ï¼ˆGatewayã®ç®¡ç†ãŒå¿…è¦ï¼‰ã«ãŠã„ã¦ S3 ç›´æŽ¥åˆ©ç”¨ã«åŠ£ã‚Šã¾ã™ã€‚
    - **D (DynamoDB)**: DynamoDB ã¯ç”»åƒã‚„ PDF ãªã©ã®ãƒã‚¤ãƒŠãƒªãƒ©ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (BLOB) ã®ä¿å­˜ã«ã¯ä¸å‘ãã§ã™ï¼ˆ400KBåˆ¶é™ãªã©ï¼‰ã€‚ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãªã‚‰OKã§ã™ãŒã€åŽŸç¨¿æœ¬ä½“ã®ä¿å­˜å…ˆã¨ã—ã¦ã¯ä¸é©åˆ‡ã§ã™ã€‚

## 4. æ¯”è¼ƒã¨å…¬å¼è³‡æ–™ (Comparison)

- **æ¯”è¼ƒè¡¨**:

| Service | Durability | Best Use Case | Managed Level |
| :--- | :--- | :--- | :--- |
| **S3** | **11 9s** | Unstructured data (Files, Images) | High (Serverless) |
| **EBS** | ~99.999% | Block storage for EC2 | Medium |
| **DynamoDB** | High | Structured data (NoSQL) | High |

| Encryption Key | Ownership | Rotation |
| :--- | :--- | :--- |
| **AWS Managed Key** | AWS | Auto (every 1 year or 3 years) - Cannot control |
| **Customer Managed Key** | **Customer** | **Configurable** (Auto/Manual) |

- **è©³ç´°è³‡æ–™**: [Amazon S3 ã®ãƒ‡ãƒ¼ã‚¿ä¿è­·](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/DataDurability.html)

## 5. å­¦ç¿’ãƒ¡ãƒ¢ (Exam Note)

â–  AWS SAP Exam Note: S3 Durability & Encryption (SAP-65)

> ### ðŸ“Œ Core Concept
> "11 9s (ã‚¤ãƒ¬ãƒ–ãƒ³ãƒŠã‚¤ãƒ³) ã®è€ä¹…æ€§" ã¨è¨€ã‚ã‚ŒãŸã‚‰å³ **S3**ã€‚
> "æš—å·éµã®æ‰€æœ‰æ¨©ã¨ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡" ã¨è¨€ã‚ã‚ŒãŸã‚‰ **KMS Customer Managed Key (CMK)**ã€‚

> ### ðŸ›  Trigger âž” Best Practice
> | æ³¨ç›®è¦ä»¶ (Trigger) | æŽ¡ã‚‹ã¹ãæ§‹æˆ (Best Practice) |
> | :--- | :--- |
> | 99.999999999% è€ä¹…æ€§ | **Amazon S3** |
> | è»¢é€ä¸­ã®æš—å·åŒ–å¼·åˆ¶ | S3 Bucket Policy `aws:SecureTransport` |
> | éµã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³/ç®¡ç†æ¨©é™ | **SSE-KMS** (Customer Managed Key) |

> ### âš ï¸ Pitfall / Anti-Pattern
> - DynamoDB ã«å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ« (ç”»åƒ/PDF) ã‚’å…¥ã‚Œã‚‹ã®ã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆS3ã«ç½®ã„ã¦ãƒªãƒ³ã‚¯ã‚’DBã¸ï¼‰ã€‚
> - EBS ã¯å¯ç”¨æ€§ã¯é«˜ã„ãŒè€ä¹…æ€§ã¯ S3 ã«åŠ£ã‚‹ã€‚ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç”¨é€”ã‚„æ¶ˆå¤±ä¸å¯ãƒ‡ãƒ¼ã‚¿ã«ã¯å‘ã‹ãªã„ï¼ˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå¿…é ˆï¼‰ã€‚

> ### ðŸ’¡ Exam Shortcut
> 11 9s = **S3**
> Key Rotation Control = **CMK**
